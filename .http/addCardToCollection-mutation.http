###
# Add Card to Collection Mutation Tests
# Auth0 JWT Authentication required - extracts user ID from JWT claims
# Domain: dev-63szoyl0kt0p7e5q.us.auth0.com

###
# Variables
# @name variables
@baseUrl = {{$dotenv BASE_URL}}
@graphqlEndpoint = {{$dotenv GRAPHQL_ENDPOINT}}
@bearerToken = {{$dotenv BEARER_TOKEN}}

### Add Card to Collection - Single Normal Card
# Add a single non-foil card to user's collection
POST {{$dotenv GRAPHQL_ENDPOINT}}
Content-Type: application/json
Authorization: Bearer {{$dotenv BEARER_TOKEN}}

mutation AddSingleCard(
  $args: AddCardToCollectionInput!
) {
  addCardToCollection(
    args: $args
  ) {
    __typename
    ... on CardsSuccessResponse {
      data {
        id
        name
        manaCost
        typeLine
        oracleText
        rarity
        setName
        artist
        imageUris {
          normal
          large
        }
        userCollection {
          finish
          special
          count
        }
      }
    }
    ... on FailureResponse {
      status {
        message
        statusCode
      }
    }
  }
}

{
    "args": {
      "cardId": "d5c83259-9b90-47c2-b48e-c7d78519e792",
      "setId": "neo",
      "userId": "6cd19505-4db6-5a83-94b5-8d58f7f8aa38",
      "userCardDetails": {
        "finish": "nonfoil",
        "special": "proof",
        "count": 1,
        "setGroupId": "normal"
      }
    }
}