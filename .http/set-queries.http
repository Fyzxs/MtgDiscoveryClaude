###
# Variables
# @name variables
@baseUrl = https://localhost:65203
@gqlEndpoint = {{baseUrl}}/graphql


### Test Simple Set Query
# @ref variables
POST {{gqlEndpoint}}
Content-Type: application/json

query TestSet {
  testSet
}


### Get Sets with Basic Properties
# @ref variables
POST {{gqlEndpoint}}
Content-Type: application/json

query GetSetsBasic($ids: SetIdsArgEntityInput!) {
  setsById(ids: $ids) {
    __typename
    ... on SetsSuccessResponse {
      data {
        id
        code
        name
        setType
        cardCount
        releasedAt
      }
    }
    ... on FailureResponse {
      status {
        message
        statusCode
      }
    }
  }
}

{
  "ids": {
    "setIds": [
      "288bd996-960e-448b-a187-9504c1930c2c"
    ]
  }
}


### Get Sets with Extended Properties
# @ref variables
POST {{gqlEndpoint}}
Content-Type: application/json

query GetSetsExtended($ids: SetIdsArgEntityInput!) {
  setsById(ids: $ids) {
    __typename
    ... on SetsSuccessResponse {
      data {
        id
        code
        tcgPlayerId
        name
        uri
        scryfallUri
        searchUri
        releasedAt
        setType
        cardCount
        digital
        iconSvgUri
        userCollection {
          totalCards
          uniqueCards
          collecting {
            setGroupId
            collecting
            count
          }
          groups {
            rarity
            group {
              nonFoil {
                cards
              }
              foil {
                cards
              }
              etched {
                cards
              }
            }
          }
        }
      }
    }
    ... on FailureResponse {
      status {
        message
        statusCode
      }
    }
  }
}

{
  "ids": {
    "userId": "6cd19505-4db6-5a83-94b5-8d58f7f8aa38",
     "setIds": [
      "288bd996-960e-448b-a187-9504c1930c2c"
    ]
  }
}


### Get Sets with ALL Fields - Comprehensive Query
# @ref variables
POST {{gqlEndpoint}}
Content-Type: application/json

query GetCompleteSets($ids: SetIdsArgEntityInput!) {
  setsById(ids: $ids) {
    __typename
    ... on SetSuccessResponse {
      data {
        id
        code
        tcgPlayerId
        name
        uri
        scryfallUri
        searchUri
        releasedAt
        setType
        cardCount
        digital
        nonFoilOnly
        foilOnly
        blockCode
        block
        iconSvgUri
        printedSize
      }
    }
    ... on FailureResponse {
      status {
        message
        statusCode
      }
      metaData {
        timeStamp
        invocationId
        elapsedTime
      }
    }
  }
}

{
  "ids": {
    "setIds": [
      "288bd996-960e-448b-a187-9504c1930c2c",
      "36ee04cb-60c5-4011-a4fa-a606fa58db96",
      "d9b9ba2b-bcc7-4a52-b510-fc4bb00459b9"
    ]
  }
}


### Get Single Set by ID
# @ref variables
POST {{gqlEndpoint}}
Content-Type: application/json

query GetSingleSet($ids: SetIdsArgEntityInput!) {
  setsById(ids: $ids) {
    __typename
    ... on SetSuccessResponse {
      data {
        id
        code
        name
        setType
        cardCount
        releasedAt
        digital
        iconSvgUri
      }
    }
    ... on FailureResponse {
      status {
        message
        statusCode
      }
    }
  }
}

{
  "ids": {
    "setIds": ["288bd996-960e-448b-a187-9504c1930c2c"]
  }
}


### Get Multiple Sets - Large Batch
# @ref variables
POST {{gqlEndpoint}}
Content-Type: application/json

query GetMultipleSets($ids: SetIdsArgEntityInput!) {
  setsById(ids: $ids) {
    __typename
    ... on SetSuccessResponse {
      data {
        id
        code
        name
        setType
        cardCount
        releasedAt
        digital
        nonFoilOnly
        foilOnly
        block
        iconSvgUri
      }
      status {
        message
        statusCode
      }
      metaData {
        timeStamp
        elapsedTime
      }
    }
    ... on FailureResponse {
      status {
        message
        statusCode
      }
    }
  }
}

{
  "ids": {
    "setIds": [
      "288bd996-960e-448b-a187-9504c1930c2c",
      "36ee04cb-60c5-4011-a4fa-a606fa58db96",
      "d9b9ba2b-bcc7-4a52-b510-fc4bb00459b9",
      "16959d12-8c73-4d93-8dde-2681269f7aab",
      "e5c37099-0af9-4b48-a2d0-0cb3aa242abc"
    ]
  }
}


### Get Sets with Minimal Fields
# @ref variables
POST {{gqlEndpoint}}
Content-Type: application/json

query GetSetsMinimal($ids: SetIdsArgEntityInput!) {
  setsById(ids: $ids) {
    __typename
    ... on SetSuccessResponse {
      data {
        id
        code
        name
      }
    }
    ... on FailureResponse {
      status {
        message
      }
    }
  }
}

{
  "ids": {
    "setIds": [
      "288bd996-960e-448b-a187-9504c1930c2c",
      "36ee04cb-60c5-4011-a4fa-a606fa58db96"
    ]
  }
}


### Get Sets for Display (Common UI Fields)
# @ref variables
POST {{gqlEndpoint}}
Content-Type: application/json

query GetSetsForDisplay($ids: SetIdsArgEntityInput!) {
  setsById(ids: $ids) {
    __typename
    ... on SetSuccessResponse {
      data {
        id
        code
        name
        setType
        cardCount
        releasedAt
        iconSvgUri
        scryfallUri
      }
    }
    ... on FailureResponse {
      status {
        message
        statusCode
      }
    }
  }
}

{
  "ids": {
    "setIds": [
      "288bd996-960e-448b-a187-9504c1930c2c",
      "36ee04cb-60c5-4011-a4fa-a606fa58db96"
    ]
  }
}


### Test Empty Set IDs
# @ref variables
POST {{gqlEndpoint}}
Content-Type: application/json

query TestEmptySets($ids: SetIdsArgEntityInput!) {
  setsById(ids: $ids) {
    __typename
    ... on SetSuccessResponse {
      data {
        id
        code
        name
      }
    }
    ... on FailureResponse {
      status {
        message
        statusCode
      }
    }
  }
}

{
  "ids": {
    "setIds": []
  }
}


### Get Sets by Code - Basic Properties
# @ref variables
POST {{gqlEndpoint}}
Content-Type: application/json

query GetSetsByCode($codes: SetCodesArgEntityInput!) {
  setsByCode(codes: $codes) {
    __typename
    ... on SetsSuccessResponse {
      data {
        id
        code
        name
        setType
        cardCount
        releasedAt
      }
    }
    ... on FailureResponse {
      status {
        message
        statusCode
      }
    }
  }
}

{
  "codes": {
    "setCodes": ["lea", "leb", "2ed"]
  }
}


### Get Single Set by Code
# @ref variables
POST {{gqlEndpoint}}
Content-Type: application/json

query GetSingleSetByCode($codes: SetCodesArgEntityInput!) {
  setsByCode(codes: $codes) {
    __typename
    ... on SetsSuccessResponse {
      data {
        id
        code
        name
        setType
        cardCount
        releasedAt
        digital
        iconSvgUri
      }
    }
    ... on FailureResponse {
      status {
        message
        statusCode
      }
    }
  }
}

{
  "codes": {
    "setCodes": ["neo"]
  }
}


### Get Multiple Sets by Code - Extended
# @ref variables
POST {{gqlEndpoint}}
Content-Type: application/json

query GetMultipleSetsByCode($codes: SetCodesArgEntityInput!) {
  setsByCode(codes: $codes) {
    __typename
    ... on SetsSuccessResponse {
      data {
        id
        code
        tcgPlayerId
        name
        uri
        scryfallUri
        searchUri
        releasedAt
        setType
        cardCount
        printedSize
        digital
        nonFoilOnly
        foilOnly
        block
        iconSvgUri
      }
    }
    ... on FailureResponse {
      status {
        message
        statusCode
      }
    }
  }
}

{
  "codes": {
    "setCodes": ["lea"]
  }
}


### Test Invalid Set Code
# @ref variables
POST {{gqlEndpoint}}
Content-Type: application/json

query TestInvalidSetCode($codes: SetCodesArgEntityInput!) {
  setsByCode(codes: $codes) {
    __typename
    ... on SetsSuccessResponse {
      data {
        id
        code
        name
      }
    }
    ... on FailureResponse {
      status {
        message
        statusCode
      }
    }
  }
}

{
  "codes": {
    "setCodes": ["invalid-code-xyz"]
  }
}


### Test Empty Set Codes
# @ref variables
POST {{gqlEndpoint}}
Content-Type: application/json

query TestEmptySetCodes($codes: SetCodesArgEntityInput!) {
  setsByCode(codes: $codes) {
    __typename
    ... on SetsSuccessResponse {
      data {
        id
        code
        name
      }
    }
    ... on FailureResponse {
      status {
        message
        statusCode
      }
    }
  }
}

{
  "codes": {
    "setCodes": []
  }
}


### Test Invalid Set ID
# @ref variables
POST {{gqlEndpoint}}
Content-Type: application/json

query TestInvalidSet($ids: SetIdsArgEntityInput!) {
  setsById(ids: $ids) {
    __typename
    ... on SetSuccessResponse {
      data {
        id
        code
        name
      }
    }
    ... on FailureResponse {
      status {
        message
        statusCode
      }
    }
  }
}

{
  "ids": {
    "setIds": ["invalid-set-id-12345"]
  }
}


### Get Sets with Groupings - Complete Grouping Data
# @ref variables
POST {{gqlEndpoint}}
Content-Type: application/json

query GetSetsWithGroupings($ids: SetIdsArgEntityInput!) {
  setsById(ids: $ids) {
    __typename
    ... on SetsSuccessResponse {
      data {
        id
        code
        name
        setType
        cardCount
        releasedAt
        iconSvgUri
        groupings {
          id
          displayName
          order
          cardCount
          rawQuery
          filters {
            collectorNumberRange {
              min
              max
              orConditions
            }
            properties
          }
        }
      }
    }
    ... on FailureResponse {
      status {
        message
        statusCode
      }
    }
  }
}

{
  "ids": {
    "setIds": [
      "288bd996-960e-448b-a187-9504c1930c2c"
    ]
  }
}


### Get Set by Code with Groupings
# @ref variables
POST {{gqlEndpoint}}
Content-Type: application/json

query GetSetByCodeWithGroupings($codes: SetCodesArgEntityInput!) {
  setsByCode(codes: $codes) {
    __typename
    ... on SetsSuccessResponse {
      data {
        id
        code
        name
        setType
        cardCount
        groupings {
          id
          displayName
          order
          cardCount
          rawQuery
          filters {
            collectorNumberRange {
              min
              max
              orConditions
            }
            properties
          }
        }
      }
    }
    ... on FailureResponse {
      status {
        message
        statusCode
      }
    }
  }
}

{
  "codes": {
    "setCodes": ["sld"]
  }
}


### Get All Sets with Groupings (Limited Fields)
# @ref variables
POST {{gqlEndpoint}}
Content-Type: application/json

query GetAllSetsWithGroupings {
  allSets {
    __typename
    ... on SetsSuccessResponse {
      data {
        code
        name
        groupings {
          displayName
          cardCount
          rawQuery
        }
      }
    }
    ... on FailureResponse {
      status {
        message
        statusCode
      }
    }
  }
}


### Get Sets with Complex Collector Number Conditions (Portal, Secret Lair)
# @ref variables
# This query demonstrates the new orConditions field that handles OR conditions
# Example sets that have complex conditions: por (Portal), sld (Secret Lair Drop)
POST {{gqlEndpoint}}
Content-Type: application/json

query GetSetsWithComplexCollectorNumbers($codes: SetCodesArgEntityInput!) {
  setsByCode(codes: $codes) {
    __typename
    ... on SetsSuccessResponse {
      data {
        id
        code
        name
        setType
        cardCount
        groupings {
          id
          displayName
          order
          cardCount
          rawQuery
          filters {
            collectorNumberRange {
              min
              max
              orConditions   # New field for OR conditions (e.g., ["30s", "57s", "66s"])
            }
            properties
          }
        }
      }
    }
    ... on FailureResponse {
      status {
        message
        statusCode
      }
    }
  }
}

{
  "codes": {
    "setCodes": ["por", "sld"]
  }
}