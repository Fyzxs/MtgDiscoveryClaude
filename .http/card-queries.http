###
# Variables
# @name variables
@baseUrl = https://localhost:65203
@gqlEndpoint = {{baseUrl}}/graphql


### Get Cards by Multiple IDs (Batch) - Without UserCollection
POST {{$dotenv GRAPHQL_ENDPOINT}}
Content-Type: application/json

query GetCardsBatch($ids: CardIdsArgEntityInput!) {
  cardsById(ids: $ids) {
    __typename
    ... on SuccessCardsResponse {
      data {
        id
        name
        manaCost
        typeLine
        oracleText
        rarity
        setName
        artist
        imageUris {
          normal
          large
        }
        userCollection {
          finish
          special
          count
        }
      }
    }
    ... on FailureResponse {
      status {
        message
      }
    }
  }
}

{
  "ids": {
    "userId":"6cd19505-4db6-5a83-94b5-8d58f7f8aa38",
    "cardIds": [
      "02e8e540-8aa3-4e6a-9a11-c3949cab5f0f",
      "d5c83259-9b90-47c2-b48e-c7d78519e792",
      "11600105-56c6-4073-a4a6-8469030b39c9",
      "0000579f-7b35-4ed3-b44c-db2a538066fe"
    ]
  }
}


### Get Cards by Multiple IDs (Batch) - With UserCollection
# This requires authentication and will enrich with user collection data
POST {{$dotenv GRAPHQL_ENDPOINT}}
Content-Type: application/json
Authorization: Bearer {{$dotenv JWT_TOKEN}}

query GetCardsBatch($ids: CardIdsArgEntityInput!) {
  cardsById(ids: $ids) {
    __typename
    ... on SuccessCardsResponse {
      data {
        id
        name
        manaCost
        typeLine
        oracleText
        rarity
        setName
        artist
        imageUris {
          normal
          large
        }
        userCollection {
          finish
          special
          count
        }
      }
    }
    ... on FailureResponse {
      status {
        message
      }
    }
  }
}

{
  "ids": {
    "cardIds": [
      "d5c83259-9b90-47c2-b48e-c7d78519e792",
      "11600105-56c6-4073-a4a6-8469030b39c9",
      "0000579f-7b35-4ed3-b44c-db2a538066fe"
    ],
    "userId": "{{$dotenv USER_ID}}"
  }
}


### FULL Get Cards by Multiple IDs (Batch)
# @ref variables
POST {{cardEndpoint}}
Content-Type: application/json

query GetCardsBatch($ids: CardIdsArgEntityInput!) {
  cardsById(ids: $ids) {
    __typename
    ... on SuccessCardsResponse {
      data {
    id
    oracleId
    multiverseIds
    tcgPlayerId
    cardMarketId
    name
    lang
    releasedAt
    uri
    scryfallUri
    layout
    highResImage
    imageStatus
    imageUris {
      small
      normal
      large
      png
      artCrop
      borderCrop
    }
    manaCost
    cmc
    typeLine
    oracleText
    power
    toughness
    loyalty
    defense
    lifeModifier
    handModifier
    colors
    colorIdentity
    colorIndicator
    keywords
    legalities {
      standard
      future
      historic
      timeless
      gladiator
      pioneer
      explorer
      modern
      legacy
      pauper
      vintage
      penny
      commander
      oathbreaker
      standardBrawl
      brawl
      alchemy
      pauperCommander
      duel
      oldschool
      premodern
      predh
    }
    games
    reserved
    foil
    nonFoil
    finishes
    oversized
    promo
    reprint
    variation
    setId
    setCode
    setName
    setType
    setUri
    setSearchUri
    scryfallSetUri
    rulingsUri
    printsSearchUri
    collectorNumber
    digital
    rarity
    flavorText
    cardBackId
    artist
    artistIds
    illustrationId
    borderColor
    frame
    frameEffects
    securityStamp
    fullArt
    textless
    booster
    storySpotlight
    edhRecRank
    pennyRank
    prices {
      usd
      usdFoil
      usdEtched
      eur
      eurFoil
      tix
    }
    relatedUris {
      gatherer
      tcgplayerInfiniteArticles
      tcgplayerInfiniteDecks
      edhrec
    }
    purchaseUris {
      tcgplayer
      cardmarket
      cardhoarder
    }
    cardFaces {
      objectString
      name
      manaCost
      typeLine
      oracleText
      colors
      colorIndicator
      power
      toughness
      loyalty
      defense
      artist
      artistId
      illustrationId
      imageUris {
        small
        normal
        large
        png
        artCrop
        borderCrop
      }
      flavorText
      printedName
      printedTypeLine
      printedText
      watermark
      layout
      cmc
    }
    allParts {
      objectString
      id
      component
      name
      typeLine
      uri
    }
    printedName
    printedTypeLine
    printedText
    watermark
    contentWarning
    preview {
      source
      sourceUri
      previewedAt
    }
    producedMana
    attractions
    userCollection {
      finish
      special
      count
    }
  }
    }
    ... on FailureResponse {
      status {
        message
      }
    }
  }
}

{
  "ids": {
    "cardIds": [
      "02eee156-54bd-46fc-8804-a73aab87f0ba",
      "d5c83259-9b90-47c2-b48e-c7d78519e792",
      "11600105-56c6-4073-a4a6-8469030b39c9",
      "0000579f-7b35-4ed3-b44c-db2a538066fe"
    ]
  }
}


### FULL Get Cards by Multiple IDs (Batch) - With UserId
# @ref variables
# This version includes userId to get user collection data
POST {{cardEndpoint}}
Content-Type: application/json
Authorization: Bearer {{$dotenv JWT_TOKEN}}

query GetCardsBatch($ids: CardIdsArgEntityInput!) {
  cardsById(ids: $ids) {
    __typename
    ... on SuccessCardsResponse {
      data {
    id
    oracleId
    multiverseIds
    tcgPlayerId
    cardMarketId
    name
    lang
    releasedAt
    uri
    scryfallUri
    layout
    highResImage
    imageStatus
    imageUris {
      small
      normal
      large
      png
      artCrop
      borderCrop
    }
    manaCost
    cmc
    typeLine
    oracleText
    power
    toughness
    loyalty
    defense
    lifeModifier
    handModifier
    colors
    colorIdentity
    colorIndicator
    keywords
    legalities {
      standard
      future
      historic
      timeless
      gladiator
      pioneer
      explorer
      modern
      legacy
      pauper
      vintage
      penny
      commander
      oathbreaker
      standardBrawl
      brawl
      alchemy
      pauperCommander
      duel
      oldschool
      premodern
      predh
    }
    games
    reserved
    foil
    nonFoil
    finishes
    oversized
    promo
    reprint
    variation
    setId
    setCode
    setName
    setType
    setUri
    setSearchUri
    scryfallSetUri
    rulingsUri
    printsSearchUri
    collectorNumber
    digital
    rarity
    flavorText
    cardBackId
    artist
    artistIds
    illustrationId
    borderColor
    frame
    frameEffects
    securityStamp
    fullArt
    textless
    booster
    storySpotlight
    edhRecRank
    pennyRank
    prices {
      usd
      usdFoil
      usdEtched
      eur
      eurFoil
      tix
    }
    relatedUris {
      gatherer
      tcgplayerInfiniteArticles
      tcgplayerInfiniteDecks
      edhrec
    }
    purchaseUris {
      tcgplayer
      cardmarket
      cardhoarder
    }
    cardFaces {
      objectString
      name
      manaCost
      typeLine
      oracleText
      colors
      colorIndicator
      power
      toughness
      loyalty
      defense
      artist
      artistId
      illustrationId
      imageUris {
        small
        normal
        large
        png
        artCrop
        borderCrop
      }
      flavorText
      printedName
      printedTypeLine
      printedText
      watermark
      layout
      cmc
    }
    allParts {
      objectString
      id
      component
      name
      typeLine
      uri
    }
    printedName
    printedTypeLine
    printedText
    watermark
    contentWarning
    preview {
      source
      sourceUri
      previewedAt
    }
    producedMana
    attractions
    userCollection {
      finish
      special
      count
    }
  }
    }
    ... on FailureResponse {
      status {
        message
      }
    }
  }
}

{
  "ids": {
    "cardIds": [
      "02eee156-54bd-46fc-8804-a73aab87f0ba",
      "d5c83259-9b90-47c2-b48e-c7d78519e792",
      "11600105-56c6-4073-a4a6-8469030b39c9",
      "0000579f-7b35-4ed3-b44c-db2a538066fe"
    ],
    "userId": "{{$dotenv USER_ID}}"
  }
}